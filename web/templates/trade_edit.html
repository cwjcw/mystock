{% extends 'layout.html' %}
{% block content %}
<h2>编辑交易</h2>
<form method="post" class="trade-form compact edit-form">
  <div class="form-row">
    <label for="trade_date">日期</label>
    <input id="trade_date" name="trade_date" type="date" value="{{ trade.trade_date }}" required>
  </div>
  <div class="form-row">
    <label for="symbol">代码</label>
    <input id="symbol" name="symbol" type="text" value="{{ trade.symbol }}" required>
  </div>
  <div class="form-row">
    <label for="asset_type">类别</label>
    <select id="asset_type" name="asset_type" required>
      <option value="stock" {% if trade.asset_type == 'stock' %}selected{% endif %}>股票</option>
      <option value="fund" {% if trade.asset_type == 'fund' %}selected{% endif %}>基金</option>
    </select>
  </div>
  <div class="form-row">
    <label for="action">方向</label>
    <select id="action" name="action" required>
      <option value="buy" {% if trade.action == 'buy' %}selected{% endif %}>买入</option>
      <option value="sell" {% if trade.action == 'sell' %}selected{% endif %}>卖出</option>
      <option value="dividend" {% if trade.action == 'dividend' %}selected{% endif %}>分红</option>
    </select>
  </div>
  <div class="form-row">
    <label for="quantity">数量</label>
    <input id="quantity" name="quantity" type="number" step="0.01" min="0" value="{{ '%.4f'|format(trade.quantity) }}" required>
  </div>
  <div class="form-row">
    <label for="price">价格</label>
    <input id="price" name="price" type="number" step="0.0001" min="0" value="{{ '%.4f'|format(trade.price) }}" required>
  </div>
  <div class="form-row">
    <label for="fee">手续费</label>
    <input id="fee" name="fee" type="number" step="0.01" min="0" value="{{ '%.2f'|format(trade.fee or 0) }}">
  </div>
  <div class="actions">
    <button class="btn" type="submit">保存修改</button>
    <a class="btn" href="{{ url_for('trades_view') }}">返回</a>
  </div>
</form>
{% endblock %}
